(()=>{var e,t,n={845:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMessage=void 0;var n=function(){function e(e,t,n,o){this._from=e,this._name=o||this._from,this._thisObj=n,this._onMessage=t,this.initListener()}return e.prototype.initListener=function(){},e}();t.BaseMessage=n},590:function(e,t,n){var o,s=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeConnectMessage=void 0;var r=n(845),a=n(303),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initListener=function(){var e=this;chrome&&chrome.runtime&&(e._prot=chrome.runtime.connect({name:e._name}),e._prot.onMessage.addListener((function(t,n){a.ConstVars.DEBUG&&console.log("==== Chrome Message 收到消息",t),t.data&&t.data.from==e._from||e._onMessage.call(e._thisObj,t)})))},t.prototype.post=function(e,t){var n=this;if(n._prot){var o=!1;try{n._prot.postMessage({from:this._from,name:this._name,type:e,data:t})}catch(e){o=!0}o&&(n.initListener(),n._prot.postMessage({from:this._from,name:this._name,type:e,data:t}))}},t}(r.BaseMessage);t.ChromeConnectMessage=i},303:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConstVars=void 0;var n=function(){function e(){}return e.StageMaskName="$GAME_INSPECT_MASK",e.BUGURL="https://github.com/chengyoujie/GameInspect/issues",e.GitHubURL="https://github.com/chengyoujie/GameInspect",e.QQ="613279506",e.DEBUG=!1,e}();t.ConstVars=n},222:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var o=n(590),s=n(578),r=function(){function e(){}return e.getMessage=function(e,t,n,o){return new(this.getMessageClsByType(e))(e,t,n,o)},e.getMessageClsByType=function(e){switch(e){case"DevPanel":case"contentChrome":case"background":return o.ChromeConnectMessage;case"Stage":case"contentWindow":return s.WindowMessage}},e}();t.Message=r},578:function(e,t,n){var o,s=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WindowMessage=void 0;var r=n(845),a=n(303),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.initListener=function(){var e=this;window.addEventListener("message",(function(t){t.data&&t.data.from==e._from||(a.ConstVars.DEBUG&&console.log(e._from+"收到消息",t),null!=e._onMessage&&e._onMessage.call(e._thisObj,t.data))}))},t.prototype.post=function(e,t){window.postMessage({from:this._from,name:this._name,type:e,data:t},"*")},t}(r.BaseMessage);t.WindowMessage=i}},o={};function s(e){var t=o[e];if(void 0!==t)return t.exports;var r=o[e]={exports:{}};return n[e].call(r.exports,r,r.exports,s),r.exports}e=s(303),t=s(222),(new(function(){function n(){}return n.prototype.start=function(){var e=this;e.winMsg=t.Message.getMessage("contentWindow",e.handleRecvWindowMessage,e),e.chromeMsg=t.Message.getMessage("contentChrome",e.handleRecvChromeMessage,e,"contentChrome"+Date.now()),window.setTimeout((function(){e.startInspectIfOpenTools()}),200)},n.prototype.handleRecvWindowMessage=function(t){e.ConstVars.DEBUG&&console.log("Content_Win 收到 message",t),t.type&&this.chromeMsg.post(t.type,t.data)},n.prototype.handleRecvChromeMessage=function(t){e.ConstVars.DEBUG&&console.log("Content_Chrome 收到 message",t),t.type&&this.winMsg.post(t.type,t.data)},n.prototype.addScript=function(e){var t=document.createElement("script");t.innerHTML=e,document.head.appendChild(t)},n.prototype.addScriptByUrl=function(e){chrome&&chrome.runtime&&(e=chrome.runtime.getURL(e)),console.log("inspeURL = "+e);var t=document.createElement("script");t.src=e,t.async=!1,document.head.appendChild(t)},n.prototype.startInspectIfOpenTools=function(){this.addScriptByUrl("js/inspector.js")},n}())).start()})();