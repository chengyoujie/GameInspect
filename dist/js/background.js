(()=>{var e,n;e={},n={},chrome.runtime.onMessage.addListener((function(a,o,d){var r,i;if(console.log("接收到 onMessage 消息： ",a),"devPanelStateChange"==a.type){var t=a.data;for(var s in e)(l=e[s]).name=="DevPanel"+t.tabId&&l.postMessage(a);for(var s in n){var l;(null===(i=null===(r=null==(l=n[s])?void 0:l.sender)||void 0===r?void 0:r.tab)||void 0===i?void 0:i.id)==t.tabId&&l.postMessage(a)}return!0}})),chrome.runtime.onConnect.addListener((function(a){console.log("on Connnect "+a.name,a);var o,d,r="DevPanel",i="contentChrome",t=0;if(0==a.name.indexOf(r))o=e,d=n,t=+a.name.replace(r,"");else{if(0!=a.name.indexOf(i))return void console.log("不是 合法的prot.name"+a.name);o=n,d=e,t=a.sender.tab.id}o[a.name]=a,a.onMessage.addListener((function(e,n){for(var a in console.log("Background 接收到 onConnect 消息： ",e,n),d){var o=d[a],s=0;0==o.name.indexOf(r)?(s=+o.name.replace(r,""),e.frameId=n.sender.frameId):0==o.name.indexOf(i)&&(s=o.sender.tab.id,e.frameId=o.sender.frameId),s==t&&o.postMessage(e)}})),a.onDisconnect.addListener((function(){var e,n,d=(null===(n=null===(e=null==a?void 0:a.sender)||void 0===e?void 0:e.tab)||void 0===n?void 0:n.url)||"";console.log("断开链接： "+a.name+" in "+d),delete o[a.name]}))}))})();