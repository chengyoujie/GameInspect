(()=>{var e,t,n,r,a,o,i,s,c={8786:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMessage=void 0;var n=function(){function e(e,t,n,r){this._from=e,this._name=r||this._from,this._thisObj=n,this._onMessage=t,this.init(),this.initListener()}return e.prototype.init=function(){},e.prototype.initListener=function(){},e}();t.BaseMessage=n},4347:function(e,t,n){var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.ChromeConnectMessage=void 0;var o=n(8786),i=n(9475),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.init=function(){},t.prototype.initListener=function(){var e=this;if(chrome&&chrome.runtime)try{e._prot=chrome.runtime.connect({name:e._name}),e._prot.onMessage.addListener((function(t,n){i.ConstVars.DEBUG&&console.log("==== Chrome Message 收到消息",t),t.data&&t.data.from==e._from||e._onMessage.call(e._thisObj,t)}))}catch(e){console.log("Game Inspect 链接失败",e)}},t.prototype.post=function(e,t){var n=this;if(n._prot){var r,a=!1;r="string"==typeof e?{from:this._from,name:this._name,type:e,data:t}:e;try{n._prot.postMessage(r)}catch(e){a=!0}a&&(n.initListener(),n._prot.postMessage(r))}},t}(o.BaseMessage);t.ChromeConnectMessage=s},9475:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConstVars=void 0;var n=function(){function e(){}return e.VERSIONURL="https://github.com/chengyoujie/GameInspect/releases/download/release",e.VERSIONINFOURL="https://chengyoujie.github.io/GameInspect/version/version.txt",e.StageMaskName="$GAME_INSPECT_MASK",e.BUGURL="https://github.com/chengyoujie/GameInspect/issues",e.GitHubURL="https://github.com/chengyoujie/GameInspect",e.TongJiURL="https://hm.baidu.com/hm.js?616b91f08c766f10bb08e53dab9823fe",e.QQ="613279506",e.HEARTBEAT=5e3,e.WINDOW_RELOAD_TAG="$gameInspectHasReload",e.WINDOW_INJECT_RELOAD_CODE="$gameInspectReloadCode",e.WINDOW_HAS_FIND_ENGINE="$gameInspectHasFindEngine",e.ENGINE_MANAGER_PROP_NAME="$gameInspectEngineManager",e.GAMEINSPECT_CLASS_KEY="$_gameInspect_class_key_$",e.GAMEINSPECT_INIT="$gameInspectInit",e.DEBUG=!1,e.DEV=!1,e.$GAMEURL="#GAMEURL#",e.$SITEURL="#SITEURL#",e.$EngineName="#ENGINENAME#",e.$VarGameURL="$gameURL",e.$VarSiteURL="$siteURL",e.$VarEngineName="$engineName",e.$SCRITP_NAMES="gameInsectScriptNames",e.SPECIAL_NAME_START="{",e.SPECIAL_NAME_END="}",e}();t.ConstVars=n},6030:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FunUtils=void 0;var n=function(){function e(){}return e.saveOldFun=function(e,t){if(!e||!e[t])return!1;var n=this.OLD_FUN_PRE+t;return e[n]||(e[n]=e[t]),!0},e.execOldFun=function(e,t,n){var r=this.OLD_FUN_PRE+t;if(e&&e[r])return this.exeFun(e,r,n)},e.exeFun=function(e,t,n){switch(n.length){case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4]);case 6:return e[t](n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6]);case 8:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);case 9:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]);case 10:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);case 11:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10]);case 12:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11]);case 13:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12]);case 14:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13]);case 15:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14]);case 16:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);case 17:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16]);case 18:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17]);case 19:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]);case 20:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19]);case 21:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20]);case 22:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21]);case 23:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22]);case 24:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23]);case 25:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24]);case 26:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25]);case 27:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26]);case 28:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27]);case 29:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27],n[28]);case 30:return e[t](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19],n[20],n[21],n[22],n[23],n[24],n[25],n[26],n[27],n[28],n[29]);default:return e[t].apply(e,n)}},e.OLD_FUN_PRE="$gameInspect_old_fun_",e}();t.FunUtils=n},8946:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;var r=n(4347),a=n(2951),o=function(){function e(){}return e.getMessage=function(e,t,n,r){return new(this.getMessageClsByType(e))(e,t,n,r)},e.getMessageClsByType=function(e){switch(e){case"DevPanel":case"contentChrome":case"background":return r.ChromeConnectMessage;case"Stage":case"contentWindow":return a.WindowMessage}},e}();t.Message=o},4797:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Utils=void 0;var r=n(9475),a=function(){function e(){}return e.getUID=function(){return this._uid++,this._uid},e.setObjectDevUUID=function(e){var t=this;e&&(e.hasOwnProperty("devUUID")||Object.defineProperty(e,"devUUID",{get:function(){var e=this.$_DevUUID;return e||(e=this.$_DevUUID=t.getUID(),t._uid2Obj[e]=this),e},enumerable:!1}))},e.getObjectByDevUUID=function(e){return this._uid2Obj[e]},e.stringifyValue=function(e){if(null==e)return"null";if(null==e)return"undefined";switch(typeof e){case"string":return e;case"bigint":case"number":return isNaN(e)?"NaN":e;case"object":return Array.isArray(e)?"array":this.getClassName(e);default:return String(e)}},e.parseValue=function(e){if("NaN"!=e&&"undefined"!=e){if("null"==e)return null;if("true"==e)return!0;if("false"==e)return!1;try{return JSON.parse(e)}catch(t){return e}}},e.setObjPropClassName=function(e){if(e&&"object"==typeof e)for(var t in e)e[t]&&e[t].prototype&&(e[t].prototype[r.ConstVars.GAMEINSPECT_CLASS_KEY]=t)},e.getClassName=function(e){if("number"==typeof e||"string"==typeof e)return e;if(e.__class__)return e.__class__;if(e.constructor&&e.constructor.__classid&&e.constructor.__classid.indexOf&&0!=e.constructor.__classid.indexOf("CLS_"))return e.constructor.__classid;if(e.$owner){var t,n=e.$owner;return n.__class__?n.__class__:n.__classname__?n.__classname__:n._className?n._className:(n.constructor&&n.constructor.name&&(t=n.constructor.name),t&&t.length>2?t:n[r.ConstVars.GAMEINSPECT_CLASS_KEY]?n[r.ConstVars.GAMEINSPECT_CLASS_KEY]:t||typeof n)}return e.__classname__?e.__classname__:e._className?e._className:e.__className&&"laya"!=e.__className.substring(0,4).toLocaleLowerCase()?e.__className:(e.constructor&&e.constructor.name&&(a=e.constructor.name),a&&a.length>2?a:e[r.ConstVars.GAMEINSPECT_CLASS_KEY]?e[r.ConstVars.GAMEINSPECT_CLASS_KEY]:a||typeof e);var a},e.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&0!=e.length){for(var n=["#a6d2b5","#cda6d2","#d2a6b1","#a6bfd2","#d2b2a6","#a6a8d2","#d190df"],r=[""],a=0;a<e.length;a++){var o=n[a%n.length];r[0]+=(0==a?"":" ")+"%c "+e[a];var i=0==a?3:0,s=a==e.length-1?3:0;r.push("background: ".concat(o,"; padding: 4px;font-size: 13px; border-radius: ").concat(i,"px ").concat(s,"px ").concat(s,"px ").concat(i,"px; color: #163808"))}this.ConsoleLogFun.apply(console,r)}},e.error=function(e){this.ConsoleLogFun.call(console,"%c".concat(e),"background: #f5a2a2; padding: 4px; width:100%; border-radius: 3px 3px 3px 3px; color: #ff0000;font-size: 13px;")},e.transformUserRuleCode=function(e,t){for(var n="",a="",o="",i=0;i<t.length;i++)t[i].engine&&(n=t[i].engine,a=t[i].url),t[i].frameId||(o=t[i].url);return this.replaceAll(e,r.ConstVars.$EngineName,'"'+n+'"',r.ConstVars.$SITEURL,'"'+o+'"',r.ConstVars.$GAMEURL,'"'+a+'"')},e.addScript=function(e,t,n){void 0===n&&(n=!0),t="$gameInspectInsertScript_"+t;var a=document.getElementById(t);if(a){if(!n)return;document.head.removeChild(a)}var o=document.createElement("script");o.innerHTML=e,o.id=t;try{document.head.appendChild(o)}catch(e){r.ConstVars.DEBUG&&console.log("添加脚本失败 "+t)}},e.addSrcScript=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=!0),t="$gameInspectInsertSrcScript_"+t;var a=document.getElementById(t);if(a){if(!r)return;document.head.removeChild(a)}var o=document.createElement("script");o.src=e,o.id=t,o.onload=function(){n&&n(!0)},o.onerror=function(){n&&n(!1)},document.head.appendChild(o)},e.evalUserRuleCode=function(t,n,a){var o="",i="",s="";n.engine&&(o=n.engine,s=n.url),n.frameId||(i=n.url),t=this.replaceAll(t,r.ConstVars.$VarEngineName,'"'+o+'"',r.ConstVars.$VarSiteURL,'"'+i+'"',r.ConstVars.$VarGameURL,'"'+s+'"');var c="$gameInspectMatchUserCode".concat(a);return e.addScript("function ".concat(c,"(){\n            ").concat(t,";\n        }\n        "),"useMatchScprit"+a),!!window[c]&&window[c]()},e.replaceAll=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)return e;for(var r=0;r<t.length;r+=2){var a=t[r],o=t[r+1];a=a.replace(/(\$|\||\.|\*|\?|\+|\{|\}|\[|\]|\%)/gi,"\\$1");var i=new RegExp(a,"gi");e=e.replace(i,o)}return e},e.copy=function(e){var t=document.getElementById("oInput");t||(t=document.createElement("textarea"),document.body.appendChild(t),t.id="oInput",t.readOnly="readonly",t.position="absolute"),t.value=e+"",t.select(),document.execCommand("copy"),document.body.removeChild(t)},e.download=function(e,t,n){void 0===n&&(n="text");var r=document.createElementNS("http://www.w3.org/1999/xhtml","a"),a=document.createEvent("MouseEvents"),o=window.URL||window.webkitURL||window,i=new Blob([e],{type:n});r.href=o.createObjectURL(i),r.download=t,a.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a),o.revokeObjectURL(r.href),r.href=""},e.getDateStr=function(e){e=e||"yyyy-MM-dd hh:mm:ss";var t=new Date,n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()};for(var r in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return e},e.copyObj=function(e,t,n){if(e){for(var r in t=t||{},e)n&&"function"==typeof e[r]||(t[r]=e[r]);return t}},e._uid=0,e.ConsoleLogFun=console.log,e._uid2Obj={},e}();t.Utils=a},8701:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WebGLUtils=void 0;var n=function(){function e(){}return e.createProgramUUID=function(){var e=this;return window[e.PROGRAM_ID_CREAT_PROP_NAME]||(window[e.PROGRAM_ID_CREAT_PROP_NAME]=0),window[e.PROGRAM_ID_CREAT_PROP_NAME]++,window[e.PROGRAM_ID_CREAT_PROP_NAME]},e.getProgramId=function(e,t){var n=this;if(!t)return 0;var r=t[n.ProgramIdPropName];return r||(r=n.createProgramUUID(),t[n.ProgramIdPropName]=r,window[n.PROGRAM_DATA_PROP_NAME]||(window[n.PROGRAM_DATA_PROP_NAME]={}),window[n.PROGRAM_DATA_PROP_NAME][r]={program:t,webgl:e}),r},e.getProgramData=function(e){return window[this.PROGRAM_DATA_PROP_NAME]?window[this.PROGRAM_DATA_PROP_NAME][e]:null},e.setCurrentProgram=function(e,t){var n=this;return window[n.CURRENT_PROGRAM_PROP_NAME]=n.getProgramId(e,t),window[n.CURRENT_PROGRAM_PROP_NAME]},e.getCurrentProgramId=function(e){var t=this;if(!window[t.CURRENT_PROGRAM_PROP_NAME]){var n=e.getParameter(e.CURRENT_PROGRAM);window[t.CURRENT_PROGRAM_PROP_NAME]=n?t.getProgramId(n,e):0}return window[t.CURRENT_PROGRAM_PROP_NAME]},e.saveShaderVarInfo=function(e,t,n,r,a){var o=window[this.LOCATION_INFO_PROP_NAME];o||(o=window[this.LOCATION_INFO_PROP_NAME]={}),o[e]||(o[e]={});var i={type:t,funName:r,name:n,value:a};o[e][n]=i},e.getShaderVarInfo=function(e,t){var n=window[this.LOCATION_INFO_PROP_NAME];return n&&n[e]?n[e][t]:null},e.getShaderVars=function(e){var t=window[this.LOCATION_INFO_PROP_NAME];return t?t[e]:null},e.initLocation=function(e,t,n){t&&(t[this.LocationNameProp]=n)},e.getLocationName=function(e){if(e)return e[this.LocationNameProp]},e.saveProgramCode=function(e,t,n){var r=this,a=r.getProgramId(e,t),o=window[r.PROGRAM_SHADER_CODE_PROP_NAME];o||(o=window[r.PROGRAM_SHADER_CODE_PROP_NAME]={});var i=o[a];i||(i=o[a]={programId:a});var s=e.getShaderParameter(n,e.SHADER_TYPE);return s==e.VERTEX_SHADER?i.vert=e.getShaderSource(n):s==e.FRAGMENT_SHADER&&(i.frag=e.getShaderSource(n)),i},e.getAllProgramCode=function(){return window[this.PROGRAM_SHADER_CODE_PROP_NAME]},e.getProgramCode=function(e){return window[this.PROGRAM_SHADER_CODE_PROP_NAME]?window[this.PROGRAM_SHADER_CODE_PROP_NAME][e]:null},e.isEqualShader=function(e,t){return(e=e.replace(/\r/gi,""))==t.replace(/\r/gi,"")},e.WEBGL_DRAW_CMDS=["drawArrays","drawElements","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","drawRangeElements","multiDrawArraysInstancedBaseInstanceWEBGL","multiDrawElementsInstancedBaseVertexBaseInstanceWEBGL"],e.WEBGL_UNIFORM_CMDS=["uniform1f","uniform1fv","uniform1i","uniform1iv","uniform2f","uniform2fv","uniform2i","uniform2iv","uniform3f","uniform3fv","uniform3i","uniform3iv","uniform4f","uniform4fv","uniform4i","uniform4iv","uniformMatrix2fv","uniformMatrix3fv","uniformMatrix4fv"],e.PROGRAM_ID_CREAT_PROP_NAME="$gameInspectProgramCreateId",e.CURRENT_PROGRAM_PROP_NAME="$gameInspectCurrentProgramId",e.PROGRAM_DATA_PROP_NAME="$gameInspectProgramData",e.ProgramIdPropName="$gameInspectProgramId",e.LocationNameProp="$gameInspcetLocationName",e.LOCATION_INFO_PROP_NAME="$gameInspectLocationInfo",e.PROGRAM_SHADER_CODE_PROP_NAME="$gameInspectProgramCode",e}();t.WebGLUtils=n},2951:function(e,t,n){var r,a=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.WindowMessage=void 0;var o=n(8786),i=n(9475),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype.initListener=function(){var e=this;window.addEventListener("message",(function(t){t.data&&t.data.from==e._from||(i.ConstVars.DEBUG&&console.log(e._from+"收到消息",t),null!=e._onMessage&&e._onMessage.call(e._thisObj,t.data))}))},t.prototype.post=function(e,t){var n;n="string"==typeof e?{from:this._from,name:this._name,type:e,data:t}:e,window.postMessage(n,"*")},t}(o.BaseMessage);t.WindowMessage=s},2103:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtendManager=void 0;var r=n(1581),a=function(){function e(){}return e.init=function(){for(var e=[r.FGUIExtend],t=0;t<e.length;t++){var n=new e[t];this._extendsDic[n.name]||this.register(n)}},e.register=function(e){this._extendsDic[e.name]=e,this._attachdExtends[e.name]=0},e.checkAttach=function(){var e=this;for(var t in e._extendsDic){var n=e._extendsDic[t];if(0==e._attachdExtends[n.name]&&(n.haveAttach()||n.haveExtend()))return e._attachdExtends[n.name]=1,e.execExtend(n),n}return null},e.checkHaveUsed=function(){var e=this;for(var t in e._extendsDic){var n=e._extendsDic[t];if(!e._haveUsedExtends[n.name]&&n.haveExtend())return e._haveUsedExtends[n.name]=!0,n}return null},e.start=function(e){var t=this;for(var n in t._bindEngine=e,t._attachdExtends)t.execExtend(t._extendsDic[n])},e.getExtendNode=function(e){var t,n=this;for(var r in n._attachdExtends){var a=n._extendsDic[r];if(a.getExtendNode&&3==n._attachdExtends[r]&&(t=a.getExtendNode(e)))return t}return e},e.execExtend=function(e){var t=this;if(t._bindEngine&&e){var n=e.name;if(1==t._attachdExtends[n]){var r={};for(var a in t._bindEngine)r[a]=t._bindEngine[a];for(var a in e.engine=r,e)t.overrideEngineProp(a,e,t._bindEngine);t._attachdExtends[n]=3}}},e.overrideEngineProp=function(e,t,n){var r=typeof t[e];"name"!=e&&("function"==r?Object.defineProperty(n,e,{value:function(){return t[e].apply(t,arguments)}}):Object.defineProperty(n,e,{get:function(){return t[e]},enumerable:!0}))},e._extendsDic={},e._attachdExtends={},e._haveUsedExtends={},e}();t.ExtendManager=a},1581:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FGUIExtend=void 0;var r=n(4797),a=function(){function e(){this.name="fgui",this._haveExtend=!1}return e.prototype.haveExtend=function(){return window.fgui||window.fairygui?(r.Utils.setObjPropClassName(window.fgui),r.Utils.setObjPropClassName(window.fairygui),!0):this._haveExtend},e.prototype.haveAttach=function(){return!0},e.prototype.getClassName=function(e){var t=this.getExtendNode(e);return t?r.Utils.getClassName(t):this.engine.getClassName(e)},e.prototype.getNotShowPropNames=function(e){var t=this,n=t.getExtendNode(e);return n&&!n.packageItem||e&&e._relations&&!e.packageItem?["baseUserData"]:t.engine.getNotShowPropNames?t.engine.getNotShowPropNames(e):null},e.prototype.modifyPropNode=function(e,t,n){var r=this;return r.getExtendNode(e)?n:r.engine.modifyPropNode?r.engine.modifyPropNode(e,t,n):n},e.prototype.canUse=function(e){var t=this.getExtendNode(e);return t?!t.isDisposed:this.engine.canUse(e)},e.prototype.getObjName=function(e){var t="",n=this.getExtendNode(e);return n&&(t=n.name||"")?t:this.engine.getObjName(e)},e.prototype.setPropValue=function(e,t,n){var r=this.getExtendNode(e);r&&(r[t]=n),this.engine.setPropValue(e,t,n)},e.prototype.getProps=function(e,t,n){var r=this.getExtendNode(e);return r&&(e=r),this.engine.getProps(e,t,n)},e.prototype.getVisible=function(e){var t=this.getExtendNode(e);return t?t.visible:this.engine.getVisible(e)},e.prototype.setVisible=function(e,t){var n=this.getExtendNode(e);n&&(n.visible=t),this.engine.setVisible(e,t)},e.prototype.getExtendNode=function(e){if(!e)return null;var t=e.$owner||e.$gobj;return t?(this._haveExtend||(this._haveExtend=!0),r.Utils.setObjectDevUUID(t),t):null},e}();t.FGUIExtend=a},201:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawControl=void 0;var r=n(4797),a=n(8701),o=function(){function e(e){this._drawCall=0,this._isChacheImage=!1,this._cacheImageData=[],this._cacheMiniImageData=[],this._newProgramLocation={},this._selectProgramId=0,this._msg=e,this.initProxy()}return Object.defineProperty(e.prototype,"drawCall",{get:function(){return this._drawCall},enumerable:!1,configurable:!0}),e.prototype.clearDrawCall=function(){this._drawCall=0},e.prototype.stopDrawDetial=function(){this._isChacheImage=!1},e.prototype.showDrawDeital=function(){var e=this;e._cacheImageData.length=0,e._cacheMiniImageData.length=0,e._isChacheImage=!0},Object.defineProperty(e.prototype,"isShowDrawDetial",{get:function(){return this._isChacheImage},enumerable:!1,configurable:!0}),e.prototype.getDrawDeitalData=function(){return this._cacheImageData},e.prototype.getDrawMiniImagesData=function(){return this._cacheMiniImageData},e.prototype.getBigImageData=function(e){return e<0||e>this._cacheImageData.length?null:this._cacheImageData[e]},e.prototype.saveWebglCode=function(e){var t=this;if(!e)return"没有数据";if(!e.frag)return"片元着色器不能为空";if(!e.vert)return"顶点着色器不能为空";var n=a.WebGLUtils.getProgramData(e.programId);if(!n)return"没有找到对应的program";var r=n.webgl,o=n.program;if(r.getProgramParameter(o,r.DELETE_STATUS))return"程序已被删除";for(var i,s,c=!1,g=r.getAttachedShaders(o),u=g?g.length:0,l=0;l<u;l++){var d=g[l],p=r.getShaderParameter(d,r.SHADER_TYPE);if(p==r.VERTEX_SHADER)i=d;else{if(p!=r.FRAGMENT_SHADER)continue;s=d}}var _="";if(i&&(_=r.getShaderSource(i)),!a.WebGLUtils.isEqualShader(_,e.vert)){if((f=t.getShader(r,e.vert,!0)).error)return f.error;i&&r.detachShader(o,i),r.attachShader(o,f.shader),c=!0}if(_="",s&&(_=r.getShaderSource(s)),!a.WebGLUtils.isEqualShader(_,e.frag)){var f;if((f=t.getShader(r,e.frag,!1)).error)return f.error;s&&r.detachShader(o,s),r.attachShader(o,f.shader),c=!0}if(!c)return"没有改变的shader";if(r.linkProgram(o),!r.getProgramParameter(o,r.LINK_STATUS))return"初始化shader 错误"+r.getProgramInfoLog(o);var m=t._newProgramLocation[e.programId]={},h=r.getProgramParameter(o,r.ACTIVE_UNIFORMS);for(l=0;l<h;l++){var v=r.getActiveUniform(o,l),E=r.getUniformLocation(o,v.name);m[v.name]=E;var I=a.WebGLUtils.getShaderVarInfo(e.programId,v.name);if(I){var w=I.value;w=[E].concat(w),r[I.funName].apply(r,w)}}return"保存成功"},e.prototype.getShader=function(e,t,n){var a=e.createShader(n?e.VERTEX_SHADER:e.FRAGMENT_SHADER);if(e.shaderSource(a,t),e.compileShader(a),!e.getShaderParameter(a,e.COMPILE_STATUS)){var o="Shader 编译错误： "+e.getShaderInfoLog(a);return r.Utils.error(o),e.deleteShader(a),{error:o}}return{shader:a}},e.prototype.setSelectProgramId=function(e){this._selectProgramId=e},e.prototype.initProxy=function(){for(var e=this,t=[WebGL2RenderingContext.prototype,WebGLRenderingContext.prototype],n=function(n){var r=t[n],o="linkProgram",i=r[o];i&&Object.defineProperty(r,o,{value:function(){var t=arguments[0],n=a.WebGLUtils.getProgramId(this,t),r=i.apply(this,arguments);return e._msg.post("gameControlGetShaderCodeResponse",a.WebGLUtils.getProgramCode(n)),r}});for(var s=a.WebGLUtils.WEBGL_UNIFORM_CMDS,c=function(t){var n=s[t],o=r[n];if(!o)return"continue";Object.defineProperty(r,n,{value:function(){var t=this,r=arguments[0],i=a.WebGLUtils.getLocationName(r),s=a.WebGLUtils.getCurrentProgramId(t);if(e._newProgramLocation[s]){var c=e._newProgramLocation[s][i];if(!c)return console.log("webgl 执行 "+n+" 时的location可能已经不存在了 属性名："+i),null;arguments[0]=c}var g=o.apply(this,arguments);return g}})},g=0;g<s.length;g++)c(g);var u=a.WebGLUtils.WEBGL_DRAW_CMDS,l=function(t){var n=u[t],o=r[n];if(!o)return"continue";Object.defineProperty(r,n,{value:function(){var t=this,n=o.apply(this,arguments);if(e._isChacheImage){var r=t.canvas,i=r.getBoundingClientRect(),s=r.toDataURL("image/jpeg",1);e._cacheImageData.push({imgData:s,x:i.x,y:i.y,w:i.width,h:i.height});var c=r.toDataURL("image/jpeg",.1),g=a.WebGLUtils.getCurrentProgramId(t);e._cacheMiniImageData.push({imgData:c,programId:g})}return e._drawCall++,n}})};for(g=0;g<u.length;g++)l(g)},r=0;r<t.length;r++)n(r)},e}();t.DrawControl=o},3853:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Spector=void 0;var r=n(201),a=n(2847),o=function(){function e(e){this._isShowDraw=!1,this._isShowBigImage=!1;var t=this;t._msg=e,t._timeControl=new a.TimerControl(window,t.handleFrameStar,t.handleFrameEnd,t),t._drawControl=new r.DrawControl(e)}return e.prototype.init=function(e){},e.prototype.handleFrameStar=function(){this._drawControl.clearDrawCall()},e.prototype.handleFrameEnd=function(){var e=this,t=e._drawControl.getDrawMiniImagesData();e._drawControl.isShowDrawDetial&&t.length>0&&(e._msg.post("gameControlDrawDetialResponse",t),e._drawControl.stopDrawDetial())},e.prototype.showDrawDeital=function(){var e=this;0==e._timeControl.scale&&e._timeControl.showNextFrame(),e._drawControl.showDrawDeital()},e.prototype.setIsShowBigImage=function(e){var t=this;t._isShowBigImage=e,e?(t._bigImage||(t._bigImage=new Image,t._bigImage.style.cssText="\n                position: absolute;\n                display: block;\n                z-index: 1000;\n                left: 0px;\n                top: 0px;"),t._bigImage.src="",document.body.append(t._bigImage)):t._bigImage&&t._bigImage.remove()},e.prototype.setBigImageIndex=function(e){var t=this;if(t._bigImage&&t._isShowBigImage){var n=t._drawControl.getBigImageData(e);if(!n)return t._bigImage.width=0,t._bigImage.height=0,void(t._bigImage.src="");t._bigImage.src=n.imgData,t._bigImage.width=n.w,t._bigImage.height=n.h,t._bigImage.style.left=n.x+"px",t._bigImage.style.top=n.y+"px"}},e.prototype.setSelectProgramId=function(e){this._drawControl.setSelectProgramId(e)},e.prototype.saveWebglCode=function(e){var t=this._drawControl.saveWebglCode(e);this._msg.post("gameControlSaveWebglCodeResponse",{result:t})},e.prototype.setPlay=function(e){this._timeControl.scale=e?1:0},e.prototype.showNextFrame=function(){this._timeControl.showNextFrame()},Object.defineProperty(e.prototype,"fps",{get:function(){return this._timeControl.fps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameTime",{get:function(){return this._timeControl.frameTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drawCall",{get:function(){return this._drawControl.drawCall},enumerable:!1,configurable:!0}),e}();t.Spector=o},2847:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TimerControl=void 0;var r=n(6030),a=function(){function e(e,t,n,r){this.requestAnimationFunName=["requestAnimationFrame","msRequestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame"],this.setTimeFunName=["setTimeout","setInterval"],this._scale=1,this.frameNum=0,this._showNextFrame=!1,this._fps=0,this._frameCount=0,this._lastRecodeFpsTime=0,this._lastFrameTime=0,this._frameTime=0;var a=this;a._win=e,a._onFrameStar=t,a._onFrameEnd=n,a._frameCallThis=r,a.initProxy()}return Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(e){this._scale=e},enumerable:!1,configurable:!0}),e.prototype.showNextFrame=function(){var e=this;0!=e._scale&&(e._scale=0),e._showNextFrame=!0},Object.defineProperty(e.prototype,"fps",{get:function(){return this._fps},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frameTime",{get:function(){return this._frameTime},enumerable:!1,configurable:!0}),e.prototype.initProxy=function(){for(var e=this,t=e._win,n=function(n){var a=e.requestAnimationFunName[n];if(!r.FunUtils.saveOldFun(t,a))return"continue";t[a]=function(){var n=arguments[0],o=Array.prototype.slice.call(arguments);return o[0]=e.packFramCallBak(e,t,n,(function(){t[a](n)})),r.FunUtils.execOldFun(t,a,o)}},a=0;a<e.requestAnimationFunName.length;a++)n(a);var o=function(n){var a=e.setTimeFunName[n],o="setTimeout"==a;if(!r.FunUtils.saveOldFun(t,a))return"continue";t[a]=function(){var n=arguments[0],i=arguments[1],s=Array.prototype.slice.call(arguments);return s[0]=i>=1e3/60&&i<=1e3/12?e.packFramCallBak(e,t,n,(function(){t[a](n)})):e.packCallBak(e,t,n,o?function(){t[a](n)}:null),r.FunUtils.execOldFun(t,a,s)}};for(a=0;a<e.setTimeFunName.length;a++)o(a)},e.prototype.packCallBak=function(e,t,n,r){return function(){if(e._showNextFrame||e.scale>0&&!e.frameNum)try{n.apply(t,arguments)}catch(e){console.error(e)}else r&&r()}},e.prototype.packFramCallBak=function(e,t,n,r){return function(){var a=Date.now();if(e.frameNum=++e.frameNum%e._scale,e._showNextFrame||e.scale>0&&!e.frameNum){e._onFrameStar&&e._onFrameStar.call(e._frameCallThis);try{n.apply(t,arguments)}catch(e){console.error(e)}e._showNextFrame=!1,e._frameCount++,a-e._lastRecodeFpsTime>1e3&&(e._fps=e._frameCount,e._frameCount=0,e._lastRecodeFpsTime=a),e._frameTime=a-e._lastFrameTime,e._lastFrameTime=a,e._onFrameEnd&&e._onFrameEnd.call(e._frameCallThis)}else r&&r()}},e}();t.TimerControl=a},9715:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadInspect=void 0;var r=n(9475),a=n(8701),o=function(){function e(){this.initProxy()}return e.prototype.initProxy=function(){for(var e=[WebGL2RenderingContext.prototype,WebGLRenderingContext.prototype],t=function(t){var n=e[t],r="createProgram",o=n[r];o&&Object.defineProperty(n,r,{value:function(){var e=o.apply(this,arguments);return a.WebGLUtils.getProgramId(this,e),e}});var i="attachShader",s=n[i];s&&Object.defineProperty(n,i,{value:function(){var e=this,t=arguments[0],n=arguments[1];return a.WebGLUtils.saveProgramCode(e,t,n),s.apply(this,arguments)}});var c="useProgram",g=n[c];g&&Object.defineProperty(n,c,{value:function(){var e=arguments[0];return a.WebGLUtils.setCurrentProgram(this,e),g.apply(this,arguments)}});var u="getUniformLocation",l=n[u];l&&Object.defineProperty(n,u,{value:function(){var e=arguments[0],t=arguments[1],n=l.apply(this,arguments),r=a.WebGLUtils.getProgramId(this,e);return a.WebGLUtils.initLocation(r,n,t),n}});for(var d=a.WebGLUtils.WEBGL_UNIFORM_CMDS,p=function(e){var t=d[e],r=n[t];if(!r)return"continue";Object.defineProperty(n,t,{value:function(){for(var e=this,n=arguments[0],o=a.WebGLUtils.getCurrentProgramId(e),i=a.WebGLUtils.getLocationName(n),s=[],c=1;c<arguments.length;c++)s.push(arguments[c]);a.WebGLUtils.saveShaderVarInfo(o,2,i,t,s);var g=r.apply(this,arguments);return g}})},_=0;_<d.length;_++)p(_)},n=0;n<e.length;n++)t(n)},e}();t.ReloadInspect=o,window.hasOwnProperty(r.ConstVars.WINDOW_INJECT_RELOAD_CODE)&&window[r.ConstVars.WINDOW_INJECT_RELOAD_CODE]||(window[r.ConstVars.WINDOW_INJECT_RELOAD_CODE]=!0,new o)}},g={};function u(e){var t=g[e];if(void 0!==t)return t.exports;var n=g[e]={exports:{}};return c[e].call(n.exports,n,n.exports,u),n.exports}e=u(8946),t=u(4797),n=u(9475),r=u(3853),a=u(8701),o=u(9715),i=u(2103),s=function(){function o(){this._treeSetting={hightLightClick:!1,hightlightHover:!1,preEventTouch:!1,showPrivate:!1,showFunction:!1,showFPS:!0},this._heartBeatCount=0,this._devPanelHasOpen=!1,this._heartBeatId=0,this._checkCustomEngineInterval=0,this.init()}return o.prototype.init=function(){var a=this;if(a.msg=e.Message.getMessage("Stage",a.handleRecvMessage,a),a._spector=new r.Spector(a.msg),a._engineManager=window[n.ConstVars.ENGINE_MANAGER_PROP_NAME],a._engineManager){a._engineManager.init(),i.ExtendManager.init(),window.hasOwnProperty(n.ConstVars.WINDOW_RELOAD_TAG)&&window[n.ConstVars.WINDOW_RELOAD_TAG]&&a.msg.post("gameControlReloadComplete"),a._checkCustomEngineInterval=setInterval((function(){a.checkCostomEngine()}),3e3);var o=setInterval((function(){a._engine=a._engineManager.check(),a._engine&&(window[n.ConstVars.WINDOW_HAS_FIND_ENGINE]=!0,clearInterval(o),i.ExtendManager.start(a._engine),a.checkExtends(),a._engine.init(),t.Utils.setObjectDevUUID(a._engine.baseCls.prototype),a._engine.start((function(e){e?a.showClickObj(e,a._treeSetting.hightLightClick):a._engine.clearMask()}),(function(e){if(e){if(a._treeSetting.hightlightHover){if(a._lastMoveObj==e)return;a._lastMoveObj=e,a.showClickObj(e,a._treeSetting.hightlightHover)}}else a._engine.clearMask()})),a._gameInfo={name:window.document.title,engin:a._engine.name,extend:[],version:a._engine.version},a.initEngineUserCode(a._engine.name),a.msg.post("treeSetingReq"),a.msg.post("gameInfoResponse",a._gameInfo),a.handleInitStage(),a.msg.post("EngineInitReq"))}),1e3)}else t.Utils.error("没有找到引擎管理类  EngineManager")},o.prototype.checkExtends=function(){var e=this;setInterval((function(){i.ExtendManager.checkAttach();var t=i.ExtendManager.checkHaveUsed();t&&(-1==e._gameInfo.extend.indexOf(t.name)&&e._gameInfo.extend.push(t.name),e.msg.post("gameInfoResponse",e._gameInfo))}),1500)},o.prototype.runHeartBeat=function(e){var r=this;e&&r._heartBeatId||!e&&!r._heartBeatId||(r._heartBeatId&&(clearInterval(r._heartBeatId),r._heartBeatId=0,r._heartBeatCount=0),e&&(r._heartBeatId=setInterval((function(){r._heartBeatCount++,n.ConstVars.DEBUG&&r._heartBeatCount>10&&(r._heartBeatCount=0,t.Utils.error("content  多次链接不上 deve")),r.msg.post("contentHeartBeatReq")}),n.ConstVars.HEARTBEAT)))},o.prototype.checkCostomEngine=function(){var e=this;if(!e._customEngine&&window.getGameInspectUserCostomEngine&&(clearInterval(e._checkCustomEngineInterval),e._checkCustomEngineInterval=0,e._customEngine=window.getGameInspectUserCostomEngine(),e._customEngine&&e._customEngine.engine)){var t=e._customEngine.engine;if(Array.isArray(t))for(var n=0;n<t.length;n++)e._engineManager.register(t[n]);else e._engineManager.register(t)}},o.prototype.showClickObj=function(e,t){for(var n,r=this,a=e;a;){var o=r._engineManager.getTreeNode(r._engine,a),i=r._engine.getChildren(a),s=[];if(i)for(var c=0;c<i.length;c++)n&&n.uid==i[c].devUUID?s.push(n):s.push(r._engineManager.getTreeNode(r._engine,i[c]));o.updateChild(s,!1),(n=o).show=!0,n.updateIcon(),a=r._engine.getParent(a)}r.msg.post("initStageDataResponse",n),r._engine&&(t&&r._engine.drawMask(e),r.msg.post("selectNode",e.devUUID)),r.msg.post("propDataResponse",{uid:e.devUUID,props:r._engine.getProps(e,r._treeSetting.showPrivate,r._treeSetting.showFunction)})},o.prototype.handleInitStage=function(){var e=this,t=e._engineManager.getTreeNode(e._engine,e._engine.stage);e.msg.post("initStageDataResponse",t)},o.prototype.handleRecvMessage=function(e){var r,o=this,s=e.data;if("contentHeartBeatResponse"!=e.type)if("EngineInitResponse"!=e.type){if("devPanelStateChange"==e.type)return o._devPanelHasOpen=s.isShow,o._devPanelHasOpen&&t.Utils.addSrcScript(n.ConstVars.TongJiURL,"baiduhmjs",null,!1),void o.runHeartBeat(o._devPanelHasOpen);if("getContentURLReq"!=e.type)if("initUserCode"!=e.type)if("runUserCodeReq"!=e.type){if("devHeartBeatReq"==e.type){for(var c=0,g=(p=window.performance).eventCounts.entries(),u=g.next();!u.done;)c+=u.value[1],u=g.next();var l=p.memory,d={jsHeapSizeLimit:l.jsHeapSizeLimit,totalJSHeapSize:l.totalJSHeapSize,usedJSHeapSize:l.usedJSHeapSize};window[n.ConstVars.WINDOW_HAS_FIND_ENGINE]&&!o._engine||o.msg.post("devHeartBeatResponse",{fps:o._spector.fps,drawCall:o._spector.drawCall,frameTime:o._spector.frameTime,jsHeap:d,eventCounts:c})}else if("gamePerformanceLoadInfoReq"==e.type){if(!window[n.ConstVars.WINDOW_HAS_FIND_ENGINE]||o._engine){var p=window.performance,_={navigation:t.Utils.copyObj(p.navigation,null,!0),timing:t.Utils.copyObj(p.timing,null,!0),timeOrigin:p.timeOrigin};o.msg.post("gamePerformanceLoadInfoResponse",_)}}else if("gameContronPlayReq"==e.type)o._spector.setPlay(s);else if("gameControlPlayNextFrameReq"==e.type)o._spector.showNextFrame();else if("gameControlDrawDetialReq"==e.type)o._spector.showDrawDeital();else if("gameControlDrawDetialShowBigReq"==e.type)o._spector.setIsShowBigImage(s);else if("gameControlJumpDrawDetialIndexReq"==e.type)o._spector.setBigImageIndex(s);else if("gameControlSaveWebglCodeReq"==e.type)o._spector.saveWebglCode(s);else if("gameControlGetShaderCodeReq"==e.type){var f=a.WebGLUtils.getAllProgramCode();o.msg.post("gameControlGetShaderCodeResponse",f)}else"gameControlSelectShaderReq"==e.type&&o._spector.setSelectProgramId(s);if(o._engine){if("expandTreeReq"==e.type){var m=t.Utils.getObjectByDevUUID(s);if(o._engine.canUse(m)){var h=[],v=o._engine.getChildren(m);if(v)for(var E=0;E<v.length;E++)h.push(o._engineManager.getTreeNode(o._engine,v[E]));o.msg.post("expandTreeResponse",{uid:m.devUUID,children:h})}}else if("initStageDataReq"==e.type)o.handleInitStage();else if("propChangeReq"==e.type){var I=s.data,w=(m=t.Utils.getObjectByDevUUID(s.uid),s.propPath),C=s.isRecodChange;if(o._engine.canUse(m)){var y=i.ExtendManager.getExtendNode(m),P=void 0;if(w){var R=w.split("."),U=function(e){if(e==R.length-1)o._engine.setPropValue(y,R[e],I),P=y[R[e]],o.msg.post("propChangeResponse",{uid:m.devUUID,propPath:w,data:t.Utils.stringifyValue(P),recodChangeStr:C?o.getRecoderStr(m,w,P):null}),o._engine.refushMask&&o._engine.refushMask();else{var n=R[e];if(-1!=n.toLocaleLowerCase().indexOf("color")){var r=y,a=y[n];"object"==typeof a&&setTimeout((function(){r[n]=a}),5)}if(!(y=y[n]))return{value:void 0}}};for(E=0;E<R.length;E++){var N=U(E);if("object"==typeof N)return N.value}}}}else if("showRectInStageReq"==e.type)m=t.Utils.getObjectByDevUUID(s),o._engine.canUse(m)&&(o._engine.drawMask(m),o.msg.post("selectNode",m.devUUID));else if("propDataReq"==e.type)m=t.Utils.getObjectByDevUUID(s),o._engine.canUse(m)&&o.msg.post("propDataResponse",{uid:m.devUUID,props:o._engine.getProps(m,o._treeSetting.showPrivate,o._treeSetting.showFunction)});else if("treeSettingInfo"==e.type){for(var D in s)o._treeSetting[D]=s[D];0!=s.hightLightClick&&0!=s.hightlightHover||o._engine&&o._engine.clearMask(),0==s.hightlightHover&&(o._lastMoveObj=null),null!=s.showFPS&&o._engine.showFPS(o._treeSetting.showFPS),o._engine.setMouseEnable(!s.preEventTouch)}else if("expandPropReq"==e.type){if(m=t.Utils.getObjectByDevUUID(s.uid),o._engine.canUse(m)){for(w=s.prop.split("."),y=i.ExtendManager.getExtendNode(m),E=0;E<w.length;E++)if(!(y=y[w[E]]))return;o.msg.post("expandPropResponse",{uid:m.devUUID,prop:s.prop,data:o._engine.getProps(y,o._treeSetting.showPrivate,o._treeSetting.showFunction)})}}else if("visibleChangeReq"==e.type)m=t.Utils.getObjectByDevUUID(s.uid),o._engine.canUse(m)&&(o._engine.setVisible(m,s.data),o.msg.post("propDataResponse",{uid:m.devUUID,props:o._engine.getProps(m,o._treeSetting.showPrivate,o._treeSetting.showFunction)}));else if("gameInfoReq"==e.type)o._gameInfo&&o.msg.post("gameInfoResponse",o._gameInfo);else if("showTreeNodeInConsoleReq"==e.type)if(m=t.Utils.getObjectByDevUUID(s),o._engine.canUse(m))if(m=i.ExtendManager.getExtendNode(m),o._customEngine&&o._customEngine.printVar)o._customEngine.printVar(m);else{var O="gameInspectNode"+m.devUUID;t.Utils.log("临时变量名",O),console.log(m),window[O]=m}else n.ConstVars.DEBUG&&console.log("没有找到节点： "+s);else if("inspectClassDefinedReq"==e.type)if(m=t.Utils.getObjectByDevUUID(s),o._engine.canUse(m)){var b="gameInspectClassFun"+(m=i.ExtendManager.getExtendNode(m)).devUUID,S=m.constructor;o._customEngine&&o._customEngine.getClassFun&&(S=o._customEngine.getClassFun(m)),S&&(window[b]=S,o.msg.post("inspectCodeResponse",{name:b,url:location.href}))}else n.ConstVars.DEBUG&&console.log("没有找到节点： "+s);else if("inspectVarDefinedReq"==e.type)m=t.Utils.getObjectByDevUUID(s),o._engine.canUse(m)?(b="gameInspectVarFun"+(m=i.ExtendManager.getExtendNode(m)).devUUID,(S=o.getVarLocationFun(m))?(window[b]=S,o.msg.post("inspectCodeResponse",{name:b,url:location.href})):(t.Utils.error("没有找到对应的变量声明"),alert("未找到变量声明的地方"))):n.ConstVars.DEBUG&&console.log("没有找到节点： "+s);else if("showTreeNodePathReq"==e.type)m=t.Utils.getObjectByDevUUID(s),o._engine.canUse(m)&&o.printNodePath(m);else if("showPropFunDefineReq"==e.type){var M="gameInspectPropFun_"+s.uid+"_"+s.propPath.replace(/\./gi,"_");if(m=t.Utils.getObjectByDevUUID(s.uid),o._engine.canUse(m)){for(m=i.ExtendManager.getExtendNode(m),w=s.propPath.split("."),y=m,S=void 0,E=0;E<w.length;E++){if(!(y=y[w[E]]))return;E==w.length-1&&(S=y)}S?(window[M]=S,o.msg.post("inspectCodeResponse",{name:M,url:location.href})):(t.Utils.error("没有找到属性的方法定义"),alert("没有找到属性的方法定义"))}}n.ConstVars.DEBUG&&console.log(" Inspection  接受到消息： ",e)}}else{var A=s;"once"==A.type?(t.Utils.addScript(A.code,A.name),t.Utils.log("执行成功 url: "+location.href)):o.checkRunUserCode(((r={})[A.name]=A,r),!0)}else o.checkRunUserCode(s);else o.msg.post("getContentURLResponse",{url:window.location.href,engine:o._engine?o._engine.name:void 0,frameId:e.frameId})}else window[n.ConstVars.WINDOW_HAS_FIND_ENGINE]=!0;else o._heartBeatCount--},o.prototype.checkRunUserCode=function(e,r){var a=this,o={url:window.location.href,frameId:window.location==top.location?0:1,engine:a._engine?a._engine.name:""};for(var i in e){var s=e[i],c=s.match;c?(c=(c=c.replace(/^\s*\/\/.*?([\n\r]|$)/gi,"")).replace(/\/\*(.|[\n\r])*?\*\//gi,""),o.engine||-1==c.indexOf(n.ConstVars.$VarEngineName)&&-1==c.indexOf(n.ConstVars.$VarGameURL)?t.Utils.evalUserRuleCode(c,o,s.name)?(window.location.href==window.top.location.href&&t.Utils.addScript(s.code,s.name),r&&t.Utils.log("执行成功 url: "+location.href)):r&&t.Utils.error("当前网站不匹配  url: "+location.href):(a._engineRunUserCode||(a._engineRunUserCode={}),a._engineRunUserCode[s.name]=s,r&&t.Utils.error("执行失败，引擎未初始化 url: "+location.href))):r&&t.Utils.error("没有匹配规则 url: "+location.href)}},o.prototype.initEngineUserCode=function(e){var n=this;if(n._engineRunUserCode){var r={url:window.location.href,frameId:window.location==top.location?0:1,engine:e};for(var a in n._engineRunUserCode){var o=n._engineRunUserCode[a];o.match&&t.Utils.evalUserRuleCode(o.match,r,o.name)&&t.Utils.addScript(o.code,o.name)}}},o.prototype.getRecoderStr=function(e,n,r){var a=this;if(e&&a._engine){if(a._customEngine&&a._customEngine.getRecoderStr)return a._customEngine.getRecoderStr(e,n,r);for(var o=n.split("."),i=e,s="",c=0;c<o.length;c++){var g=o[c];s=Array.isArray(i)?s+"["+g+"]":s+"."+g,i=i[g]}var u=a.getNodePath(e),l=t.Utils.stringifyValue(r);return"string"==typeof r&&(l='"'+l+'"'),u+s+" = "+l}},o.prototype.getVarLocationFun=function(e){var n=this;if(e&&n._engine){var r;if(n._customEngine&&n._customEngine.getVarLocationFun)r=n._customEngine.getVarLocationFun(e);else for(var a=n._engine.getParent(e);a;){var o=Object.keys(a);for(var i in o){var s=o[i];if(a[s]==e){r=a.constructor,t.Utils.log("对应变量： ".concat(s));break}}a=n._engine.getParent(a)}return r}},o.prototype.printNodePath=function(e){e&&this._engine&&t.Utils.log("对应变量： "+this.getNodePath(e))},o.prototype.getNodePath=function(e){var t=this;if(e&&t._engine){var n="";if(t._customEngine&&t._customEngine.getNodePath)return t._customEngine.getNodePath(e);for(var r=void 0,a=e;a;){r=t._engine.getParent(a);for(var o=void 0;r;){var i=Object.keys(r);for(var s in i){var c=i[s];if(r[c]==a){o=c,a=r;break}}if(o)break;r=t._engine.getParent(r)}if(o)n=o+(n?"."+n:"");else{o||(o=t._engine.getObjName(a));var g=t._engine.getParent(a);!o&&g&&-1!=(s=t._engine.getChildren(g).indexOf(a))&&(o=s+""),o&&(n=o+(n?"."+n:"")),g||(n=t._engine.getClassName(a)+(n?"."+n:"")),a=g}}return n}},o}(),o.ReloadInspect,new s,window[n.ConstVars.GAMEINSPECT_INIT]=!0})();